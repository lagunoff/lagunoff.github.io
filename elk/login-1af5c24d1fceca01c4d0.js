webpackJsonp([5],{0:function(e,t,n){n(386),n(387),e.exports=n(657)},538:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function i(e,t){var n,r=e.animated,i=e.className,l=e.shrink,s=o(e,["animated","className","shrink"]),f=t.styleManager.render(m),d=(0,p["default"])(f.root,(n={},a(n,f.animated,r),a(n,f.shrink,l),n),i);return c["default"].createElement("label",u({className:d},s))}Object.defineProperty(t,"__esModule",{value:!0}),t.styleSheet=void 0;var l=n(8),u=l||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t["default"]=i;var s=n(1),c=r(s),f=n(11),d=n(10),p=r(d),h=n(134),m=t.styleSheet=(0,f.createStyleSheet)("TextFieldLabel",function(e){return{root:{color:e.palette.text.secondary,position:"absolute",left:0,top:0,lineHeight:1,transform:"translate(0, 18px) scale(1)",transformOrigin:"top left"},shrink:{transform:"translate(0, 0px) scale(0.75)"},animated:{transition:e.transitions.create("transform","200ms",null,h.easing.easeOut)}}},{index:5});i.propTypes={animated:s.PropTypes.bool,className:s.PropTypes.string,shrink:s.PropTypes.bool},i.defaultProps={animated:!0},i.contextTypes={styleManager:s.PropTypes.object.isRequired},i.muiName="TextFieldLabel"},603:function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(a,o){try{var i=t[a](o),l=i.value}catch(u){return void n(u)}return i.done?void e(l):Promise.resolve(l).then(function(e){return r("next",e)},function(e){return r("throw",e)})}return r("next")})}}Object.defineProperty(t,"__esModule",{value:!0}),t.login=t.logout=void 0;var a=(t.logout=function(){var e=r(regeneratorRuntime.mark(function t(e,n){var r,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.logoutRequestUrl||n.apiUrl+"logout",t.next=3,e(r,{headers:{Accept:"application/json","Content-Type":"application/json"}});case 3:return a=t.sent,t.abrupt("return",a);case 5:case"end":return t.stop()}},t,this)}));return function(t,n){return e.apply(this,arguments)}}(),t.login=function(){var e=r(regeneratorRuntime.mark(function t(e,n,r,o){var i,l,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.loginUrl||n.apiUrl+"login",t.next=3,e(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({login:r,password:o})});case 3:if(l=t.sent,404!==l.status){t.next=6;break}throw a.I18NError.fromCode("incorrect_login");case 6:return t.next=8,l.json();case 8:if(u=t.sent,u.auth_token){t.next=11;break}throw a.I18NError.fromCode("invalid_response");case 11:return t.abrupt("return",u);case 12:case"end":return t.stop()}},t,this)}));return function(t,n,r,a){return e.apply(this,arguments)}}(),n(175))},604:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){var t=arguments.length<=1||void 0===arguments[1]||arguments[1],n=arguments.length<=2||void 0===arguments[2]?"/login":arguments[2];return function(r){return function(a,o){if(!e)return r(a,o);var i=e.getItem("authToken");if(null===i&&t)return["authToken","authTokenExpireTime"].forEach(function(t){return e.removeItem(t)}),void(window.location=n);var l=o||{};return null!==i&&((l.headers=l.headers||{})["X-Auth"]=i),r(a,l)}}}function o(e){return function(t){return function(n,r){var a=(0,g["default"])()?null:window.location.hostname,o=e.xBrigadierSite||a;if(!o)return t(n,r);var i=h({},r,{headers:h({},r&&r.headers,{"X-Brigadier-Site":o})});return t(n,i)}}}function i(e){return function(t){return function(n,r){var a=h({},r,{headers:h({},r&&r.headers,e)});return t(n,a)}}}function l(){var e=arguments.length<=0||void 0===arguments[0]?"application/json":arguments[0];return i({"Content-Type":e})}function u(){var e=arguments.length<=0||void 0===arguments[0]?"application/json":arguments[0];return i({Accept:e})}function s(){var e=arguments.length<=0||void 0===arguments[0]?"/login":arguments[0];return function(t){return function(n,r){return t(n,r).then(function(t){return 401!=t.status||(0,g["default"])()||(window.location=e),t})}}}function c(e){return function(t){return function(n,r){return new Promise(function(a,o){setTimeout(function(){o(new Error("Timeout exceeded while trying to fetch response from "+n))},e),t(n,r).then(function(e){a(e)})["catch"](function(e){return o(e)})})}}}function f(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=Array.isArray(n[0])?n[0]:n;return a.reduce(function(e,t){return t(e)},e)}function d(e){return(0,v["default"])(e)?null:e.map(function(e){return e.message}).join(", ")}function p(e){if(!(0,v["default"])(e))throw new Error(d(e))}Object.defineProperty(t,"__esModule",{value:!0});var h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.authMiddleware=a,t.xBrigadierSiteMiddleware=o,t.customHeaderMiddleware=i,t.contentTypeMiddleware=l,t.acceptMiddleware=u,t.redirectOn401Middleware=s,t.timeoutMiddleware=c,t.fetchApplyMiddleware=f,t.thowIfNotEmpty=p;var m=n(176),g=r(m),y=n(71),v=r(y)},626:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(a,o){try{var i=t[a](o),l=i.value}catch(u){return void n(u)}return i.done?void e(l):Promise.resolve(l).then(function(e){return r("next",e)},function(e){return r("throw",e)})}return r("next")})}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(35),c=r(s),f=n(1),d=r(f),p=n(374),h=r(p),m=n(627),g=r(m),y=n(56),v=(r(y),n(106)),b=(r(v),n(604)),w=(n(603),(0,b.fetchApplyMiddleware)(fetch,[(0,b.timeoutMiddleware)(c["default"].timeout),(0,b.xBrigadierSiteMiddleware)(c["default"])]),function(e){function t(e){var n=this;o(this,t);var r=i(this,Object.getPrototypeOf(t).call(this,e));return r._login=function(){var e=a(regeneratorRuntime.mark(function t(e,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.location="/";case 1:case"end":return e.stop()}},t,n)}));return function(t,n){return e.apply(this,arguments)}}(),r._loginChanged=function(e){r.setState({login:e.target.value})},r._passwordChanged=function(e){r.setState({password:e.target.value})},r.state={translations:e.translations,locale:e.locale,login:"",password:"",status:"initial"},r}return l(t,e),u(t,[{key:"render",value:function(){return d["default"].createElement(h["default"],{translations:this.state.translations,locale:this.state.locale,availableLocales:["en-US","ru-RU"],theme:this.props.theme},d["default"].createElement(g["default"],{onSubmit:this._login,onLoginChange:this._loginChanged,onPasswordChange:this._passwordChanged,login:this.state.login,password:this.state.password,status:this.state.status}))}}]),t}(d["default"].Component));w.propTypes={translations:d["default"].PropTypes.object,locale:d["default"].PropTypes.string.isRequired,theme:d["default"].PropTypes.object.isRequired,successLoginUrl:d["default"].PropTypes.string},w.defaultProps={successLoginUrl:"/"},t["default"]=w},627:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.styleSheet=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=n(1),f=r(c),d=n(1237),p=r(d),h=n(131),m=r(h),g=n(538),y=r(g),v=n(330),b=r(v),w=n(53),P=r(w),T=n(213),x=r(T),_=n(628),O=r(_),j=(n(384),n(105)),S=r(j),E=n(56),N=r(E),k=n(12),C=r(k),M=n(13),R=n(63),L=t.styleSheet=(0,M.createStyleSheet)("LoginPage",function(e){var t=24,n=16,r=8;return{root:{width:"100%",minHeight:"100%",position:"absolute",background:R.grey[50],margin:"0 auto"},title:s({},e.typography.subheading,{textAlign:"center",margin:"0 0 "+n+"px 0"}),heading:s({},e.typography.display2,{textAlign:"center",marginBottom:3*t}),formCard:l({padding:n,textAlign:"center",maxWidth:350,margin:"0 auto",boxSizing:"border-box"},e.breakpoints.down("sm"),{marginLeft:r,marginRight:r,maxWidth:"calc(100% - "+2*r+"px)"}),container:{width:"100%",position:"absolute",top:"50%",transform:"translateY(-50%)",marginTop:-(2*t)},input:{width:"100%",display:"block"},field:{"&:first-child":{marginTop:0}},remember:{display:"flex",flexDirection:"row",alignItems:"center",marginLeft:-n},submit:{width:"100%",marginTop:t},logo:{margin:2*t+"px auto 0 auto"}}}),F=function(e){function t(e,n){a(this,t);var r=o(this,Object.getPrototypeOf(t).call(this,e,n));return r._handleLoginChange=function(e){r.setState({login:e.target.value})},r._handlePasswordChange=function(e){r.setState({password:e.target.value})},r._handleLocaleChange=function(e){storage.setItem("locale",e),r.setState({i18n:internationalization.loadTranslations(e),locale:e})},r._focusLoginField=function(){var e=ReactDOM.findDOMNode(r),t=e.querySelector("input[name=login]");t&&t.focus()},r._handleSubmit=function(e){e.preventDefault(),r.props.onSubmit&&r.props.onSubmit(e)},r._init(e,n),r}return i(t,e),u(t,[{key:"commentDidMount",value:function(){var e=this;setTimeout(function(){e._focusLoginField()},1e3)}},{key:"componentWillReceiveProps",value:function(e,t){t!==this.context&&this._init(e,t)}},{key:"_init",value:function(e,t){this.languagesOptions=[{label:t.i18n.gettext("English"),value:"en-US"},{label:t.i18n.gettext("Russian"),value:"ru-RU"}]}},{key:"render",value:function(){var e=this,n=this.props.className,r=function(t){return e.context.i18n.dcgettext("messages",t,"login-page")},a=(0,N["default"])(this.props,t.propTypes),o=this.context.styleManager.render(L,{group:"mui"}),i=(0,C["default"])(o.root,n);return f["default"].createElement("div",s({},a,{className:i}),f["default"].createElement("div",{className:o.container},f["default"].createElement("h1",{className:o.heading},r("Unified account service")),f["default"].createElement(x["default"],{className:o.formCard},f["default"].createElement(S["default"],{pageTitle:r("Sign in"),title:r("Please enter your login and password"),className:o.title}),f["default"].createElement("form",{onSubmit:this._handleSubmit},f["default"].createElement(p["default"],{className:o.field},f["default"].createElement(y["default"],null,r("Login")),f["default"].createElement(m["default"],{className:o.input,name:"login",value:this.props.login,onChange:this.props.onLoginChange})),f["default"].createElement(p["default"],{className:o.field},f["default"].createElement(y["default"],null,r("Password")),f["default"].createElement(m["default"],{className:o.input,name:"password",value:this.props.password,onChange:this.props.onPasswordChange})),f["default"].createElement("div",{className:o.remember},f["default"].createElement(b["default"],null),r("Remember me")),f["default"].createElement(P["default"],{type:"submit",className:o.submit,raised:!0,primary:!0,disabled:"fetching"===this.props.status},f["default"].createElement("i",{className:"material-icons"},"arrow_forward"),"  ",r("Sign in")))),f["default"].createElement(O["default"],{className:o.logo})))}}]),t}(f["default"].Component);F.propTypes={className:f["default"].PropTypes.string,login:f["default"].PropTypes.string,password:f["default"].PropTypes.string,locale:f["default"].PropTypes.string,status:f["default"].PropTypes.string,onSubmit:f["default"].PropTypes.func,onLocaleChange:f["default"].PropTypes.func,onLoginChange:f["default"].PropTypes.func,onPasswordChange:f["default"].PropTypes.func},F.contextTypes={styleManager:f["default"].PropTypes.object.isRequired,locale:f["default"].PropTypes.string.isRequired,i18n:f["default"].PropTypes.object.isRequired},t["default"]=F},628:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(){return g}Object.defineProperty(t,"__esModule",{value:!0}),t.styleSheet=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(1),l=r(i),u=n(56),s=r(u),c=n(12),f=r(c),d=n(934),p=r(d),h=n(13),m=t.styleSheet=(0,h.createStyleSheet)("Logo",function(e){return{root:{textAlign:"center"},logoLink:{display:"block",position:"relative","&:after":{position:"absolute",cursor:"pointer",content:'""',width:"100%",height:"100%",display:"block",top:0,left:0},"&:hover":{"&:after":{background:"rgba(255,255,255,0.2)"}}},image:{width:200,"&:hover":{}},claim:{fontSize:16}}}),g=(new Date).getFullYear(),y=function v(e,t){var n=(0,s["default"])(e,v.propTypes),r=t.styleManager.render(m,{group:"mui"}),i=(0,f["default"])(r.root,e.className);return l["default"].createElement("div",o({},n,{className:i}),l["default"].createElement("a",{className:r.logoLink,href:"http://www.bitmaster.ru/",target:"_blank"},l["default"].createElement("img",{className:r.image,src:p["default"],alt:"Bitmaster logo"})),l["default"].createElement("span",{className:r.claim},"2003-",a()))};y.propTypes={className:l["default"].PropTypes.string},y.contextTypes={styleManager:l["default"].PropTypes.object.isRequired},t["default"]=y},657:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var a=n(377),o=r(a);n(378),n(376),n(379);var i=n(106),l=(r(i),n(226)),u=r(l),s=n(1),c=r(s),f=n(20),d=r(f),p=n(626),h=r(p),m=n(561),g=(r(m),n(373)),y=new Promise(function(e){"interactive"!==document.readyState&&"complete"!==document.readyState||e(),document.onreadystatechange=function(){"interactive"!==document.readyState&&"complete"!==document.readyState||(e(),document.onreadystatechange=void 0)}});Promise.all([y,(0,g.fetchTranslations)("ru-RU"),(0,o["default"])()]).then(function(e){var t=e[1],n=t.translations,r=t.locale,a=document.getElementById("app-mount-point"),o=document.getElementById("spinner"),i=(0,u["default"])(),l=c["default"].createElement(h["default"],{translations:n,locale:r,theme:i});d["default"].render(l,a,function(){o.parentNode.removeChild(o),a.style.display="block"})})},934:function(e,t,n){e.exports=n.p+"logo-0b0e10e099bd315a5d4efa95f3d1f8d6.png"},1236:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.styleSheet=void 0;var s=n(8),c=s||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(1),p=r(d),h=n(11),m=n(10),g=r(m),y=n(134),v=n(335),b=t.styleSheet=(0,h.createStyleSheet)("TextField",function(e){var t=e.palette.accent.A200;return{root:{display:"flex",position:"relative",marginTop:16,"&:after":{backgroundColor:t,left:0,bottom:9,content:"''",height:2,position:"absolute",width:"100%",transform:"scaleX(0)",transition:e.transitions.create("transform","200ms",null,y.easing.easeOut)}},label:{},input:{display:"block",marginTop:10,marginBottom:10,width:"100%",zIndex:1},focused:{"& $label":{color:t},"&:after":{transform:"scaleX(1)"}}}},{index:10}),w=function(e){function t(){var e,n,r,a;i(this,t);for(var o=arguments.length,u=Array(o),s=0;s<o;s++)u[s]=arguments[s];return n=r=l(this,(e=Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.state={dirty:!1,focused:!1},r.classes={},r.handleFocus=function(){return r.setState({focused:!0})},r.handleBlur=function(){return r.setState({focused:!1})},r.handleDirty=function(){r.state.dirty||r.setState({dirty:!0})},r.handleClean=function(){r.state.dirty&&r.setState({dirty:!1})},r.renderChild=function(e){var t=e.type.muiName;return"TextFieldInput"===t?r.renderInput(e):"TextFieldLabel"===t?r.renderLabel(e):e},r.renderInput=function(e){return(0,d.cloneElement)(e,{className:(0,g["default"])(r.classes.input,e.props.className),onDirty:r.handleDirty,onClean:r.handleClean,onFocus:(0,v.createChainedFunction)(r.handleFocus,e.props.onFocus),onBlur:(0,v.createChainedFunction)(r.handleBlur,e.props.onBlur)})},r.renderLabel=function(e){return(0,d.cloneElement)(e,{className:(0,g["default"])(r.classes.label,e.props.className),shrink:e.props.hasOwnProperty("shrink")?e.props.shrink:r.state.dirty||r.state.focused})},a=n,l(r,a)}return u(t,e),f(t,[{key:"render",value:function(){var e,t=this.props,n=t.children,r=t.className,i=o(t,["children","className"]);this.classes=this.context.styleManager.render(b);var l=(0,g["default"])((e={},a(e,this.classes.root,!0),a(e,this.classes.focused,this.state.focused),e),r);return p["default"].createElement("div",c({className:l},i),p["default"].Children.map(n,this.renderChild))}}]),t}(d.Component);w.propTypes={children:d.PropTypes.node,className:d.PropTypes.string},w.contextTypes={styleManager:d.PropTypes.object.isRequired},t["default"]=w},1237:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.TextFieldLabel=t.TextFieldInput=t.TextField=t["default"]=void 0;var a=n(1236),o=r(a),i=n(131),l=r(i),u=n(538),s=r(u);t["default"]=o["default"],t.TextField=o["default"],t.TextFieldInput=l["default"],t.TextFieldLabel=s["default"]}});